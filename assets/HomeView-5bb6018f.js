import{d as B,o as f,c as w,a as t,t as n,r as T,u as W,b as z,e as H,f as M,g,h as P,i as R,j as e,k as a,l as i,m as U,n as E,w as l,A as I,_ as J,p as $,q as C,s as L,v as O,x as q}from"./index-41944f3a.js";function G(y){return Intl.NumberFormat("en-US",{currency:"USD",maximumSignificantDigits:4,notation:"compact"}).format(y)}const K={class:"d-flex align-items-center px-md-3 border-bottom border-dark statictic-wrapper px-0 py-3"},Q={class:"d-flex justify-content-center align-items-center statictic-avatar flex-shrink-0"},X={class:"d-flex flex-column statictic-content"},Y={class:"statictic-content-title"},Z={class:"statictic-content-subtitle mt-1 text-white"},k=B({__name:"AppStatistic",props:{initial:{},label:{},value:{},isLoading:{type:Boolean}},setup(y){return(r,p)=>(f(),w("div",K,[t("div",Q,n(r.initial),1),t("div",X,[t("div",Y,n(r.label),1),t("div",Z,n(r.isLoading?"...":r.value),1)])]))}}),tt={class:"d-flex flex-column flex-grow-1"},st={class:"position-relative pb-5",id:"hero"},at={class:"container"},et={class:"row statictic my-4 py-3"},ot={class:"col-12 col-lg-6"},nt={class:"row"},lt={class:"col-6 p-3"},it={class:"d-flex justify-content-between align-items-center"},ct=t("div",{class:"custom-border-right d-none d-md-block"},null,-1),rt={class:"col-6 p-3"},dt={class:"d-flex justify-content-between align-items-center"},ut=t("div",{class:"custom-border-right d-none d-md-block"},null,-1),_t={class:"position-relative col-12 col-lg-6 mt-lg-0 mt-4"},ht={class:"position-absolute"},vt={class:"bg-linear text-clip"},gt={id:"transactions"},mt={class:"container"},bt={class:"row"},ft={class:"col-12 col-lg-6"},pt={class:"mb-3"},xt={class:"list"},kt={class:"d-flex flex-column"},wt={class:"text-white"},yt={class:"d-flex flex-column"},St={class:"text-white"},Tt={class:"col-12 col-lg-6 mt-lg-0 mt-5"},$t={class:"d-flex justify-content-between align-items-center"},Ct={class:"mb-3"},Lt={key:0,style:{"font-size":"12px"}},Bt={key:1,style:{"font-size":"12px"}},Vt={class:"list"},Nt={class:"d-flex flex-column"},jt={class:"text-white"},At={class:"d-flex flex-column"},Dt={class:"d-flex flex-column"},Wt=B({__name:"HomeView",setup(y){const r=O(),p=q(),V=T([{key:"block",label:"Block",align:"left",slot:!0},{key:"validated",label:"Validated",align:"left",slot:!0},{key:"reward",label:"Block Reward",align:"right",slot:!0}]),N=T([{key:"hash",label:"Txn Hash",align:"left",slot:!0},{key:"from",label:"From",align:"left",slot:!0},{key:"value",label:"Value",align:"right",slot:!0}]),S=T(0),j=W(),A=z(),h=H(),x=M();g(()=>j.data),g(()=>A.data.search);const c=g(()=>h.$state),v=g(()=>x.$state),D=g(()=>{var u;return(u=h.statChartTxs.data.chartData)==null?void 0:u.map(d=>d.date).reverse()}),F=g(()=>{var u;return(u=h.statChartTxs.data.chartData)==null?void 0:u.map(d=>d.txCount).reverse()});return P(async()=>{await h.getStats(),await h.getStatChartTxs(),await h.getStatChartMarket(),await x.fetchTxs(),await x.fetchIndexingStatus(),await x.fetchBlocks();const u="ws://http://45.77.40.194:8546",d=new WebSocket(`${u}/socket/v2/websocket?vsn=2.0.0`);d.onopen=()=>{function o(s){d.send(JSON.stringify(s))}o(["5","5","transactions:new_transaction","phx_join",{}]),o(["8","8","blocks:new_block","phx_join",{}])},d.onerror=o=>{window.console.error(`WebSocket error ${o}`),window.console.dir(o)},d.onmessage=({data:o})=>{let s={};try{s=JSON.parse(o)}catch(_){console.error(`Error parsing : ${_.data}`)}s[2]==="transactions:new_transaction"&&s[4].transaction&&(S.value+=s[4].transaction)}}),(u,d)=>{const o=R("RouterLink");return f(),w("main",tt,[t("section",st,[t("div",at,[e(a(I)),t("div",et,[t("div",ot,[t("div",nt,[t("div",lt,[t("div",it,[t("div",null,[e(a(k),{initial:"A",label:"Average block time","is-loading":c.value.stats.isLoading,value:(c.value.stats.data.averageBlockTime/1e3).toFixed(1).toString()+" s"},null,8,["is-loading","value"]),e(a(k),{initial:"T",label:"Total blocks","is-loading":c.value.stats.isLoading,value:(+c.value.stats.data.totalBlocks).toLocaleString()},null,8,["is-loading","value"])]),ct])]),t("div",rt,[t("div",dt,[t("div",null,[e(a(k),{initial:"T","is-loading":c.value.stats.isLoading,label:"Transactions",value:(+c.value.stats.data.totalTransactions).toLocaleString()},null,8,["is-loading","value"]),e(a(k),{initial:"W",label:"Wallet addresses","is-loading":c.value.stats.isLoading,value:(+c.value.stats.data.totalAddresses).toLocaleString()},null,8,["is-loading","value"])]),ut])])])]),t("div",_t,[t("span",ht,[i("Daily txs "),t("strong",vt,n(a(G)(+c.value.stats.data.transactionsToday)),1)]),c.value.statChartTxs.isLoading?E("",!0):(f(),U(a(J),{key:0,"is-currency":!0,data:{labels:D.value,datasets:F.value}},null,8,["data"]))])])])]),t("section",gt,[t("div",mt,[t("div",bt,[t("div",ft,[t("h6",pt,"The latest "+n(v.value.blocks.data.length)+" Blocks",1),t("div",xt,[e(a(L),{columns:V.value,loading:v.value.blocks.isLoading,items:v.value.blocks.data},{block:l(({item:s})=>[t("div",kt,[e(o,{to:`/blocks/${s.height}`,class:"bg-linear text-clip"},{default:l(()=>[i(n(s.height),1)]),_:2},1032,["to"]),t("div",wt,[e(a($),{date:s.timestamp},null,8,["date"])])])]),validated:l(({item:s})=>[t("div",yt,[e(o,{class:"bg-linear text-clip",to:`/accounts/${s.miner.hash}`},{default:l(()=>[i(n(a(r).truncate(s.hash)),1)]),_:2},1032,["to"]),t("div",St,n(s.txCount)+" transactions ",1)])]),reward:l(({item:s,column:_})=>{var m;return[t("p",{class:C(`text-${_.align}`)},n(a(p).getValue(String(((m=s.rewards[0])==null?void 0:m.reward)||"0"))),3)]}),_:1},8,["columns","loading","items"]),e(o,{to:"/blocks",class:"btn btn-primary btn-lg btn-block"},{default:l(()=>[i(" View all blocks ")]),_:1})])]),t("div",Tt,[t("div",$t,[t("h6",Ct,"The latest "+n(v.value.transactions.data.length)+" Transactions",1),S.value>0?(f(),w("p",Lt,[e(o,{to:"/transactions",class:"bg-linear text-clip"},{default:l(()=>[i(n(a(p).format(S.value))+" more transactions",1)]),_:1}),i(" Â  have come in ")])):(f(),w("p",Bt,"scanning new transactions..."))]),t("div",Vt,[e(a(L),{columns:N.value,loading:v.value.transactions.isLoading,items:v.value.transactions.data},{hash:l(({item:s})=>[t("div",Nt,[e(o,{to:`/transactions/${s.hash}`,class:"bg-linear text-clip"},{default:l(()=>[i(n(a(r).truncate(s.hash)),1)]),_:2},1032,["to"]),t("div",jt,[e(a($),{date:s.timestamp},null,8,["date"])])])]),from:l(({item:s})=>{var _,m;return[t("div",At,[t("div",Dt,[t("div",null,[i(" From "),e(o,{to:`/accounts/${(_=s.from)==null?void 0:_.hash}`,class:"bg-linear text-clip"},{default:l(()=>{var b;return[i(n(a(r).truncate(((b=s.from)==null?void 0:b.hash)||"")),1)]}),_:2},1032,["to"])]),t("div",null,[i(" To "),e(o,{to:`/accounts/${(m=s.to)==null?void 0:m.hash}`,class:"bg-linear text-clip"},{default:l(()=>{var b;return[i(n(a(r).truncate(((b=s.to)==null?void 0:b.hash)||"")),1)]}),_:2},1032,["to"])])])])]}),value:l(({item:s,column:_})=>[t("p",{class:C(`text-${_.align}`)},n(a(p).getValue(s.value)),3)]),_:1},8,["columns","loading","items"]),e(o,{to:"/transactions",class:"btn btn-primary btn-lg btn-block"},{default:l(()=>[i(" View all transactions ")]),_:1})])])])])])])}}});export{Wt as default};

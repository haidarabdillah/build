import{d as w,y as B,z as N,B as C,C as V,r as _,g as p,h as P,D as q,i as L,c as D,a as t,j as l,w as a,k as b,s as F,F as R,E as S,o as T,A as U,l as E,t as u,p as G,v as $,x as A}from"./index-6b4296aa.js";const M="/assets/blocks-36efb8eb.svg",j={class:"position-relative pb-5",id:"hero"},z={class:"container"},H={id:"latest-block"},I={class:"container"},J=S('<div class="row"><div class="col-12 p-4 rounded bg-primary-2"><div class="d-flex align-items-center"><img src="'+M+'" alt=""><div class="latest-block-title ml-3"> Blocks </div></div></div></div>',1),K={class:"row mt-4"},O={class:"col-12"},Q={class:"bg-primary-2 rounded overflow-auto"},W={class:"bg-linear text-clip"},Z=w({__name:"BlockView",setup(X){const o=B(),f=$(),c=A(),i=N(),m=C(),n=V({page:1,limit:50}),d=_(!1),k=_([{key:"block",label:"Block",align:"left",slot:!0},{key:"timestamp",label:"Time",align:"left",slot:!0},{key:"txCount",label:"Transaction",align:"left"},{key:"miner",label:"Miner",align:"left",slot:!0},{key:"gasUsed",label:"Gas Used",align:"left",customValue:e=>c.format(Number(e))},{key:"gasLimit",label:"Gas Limit",align:"left",customValue:e=>c.format(Number(e))},{key:"gasUsedPercentage",label:"Gas Used (%)",align:"left",customValue:e=>c.format(Number(e),{maximumFractionDigits:2,minimumFractionDigits:2})+"%"}]),r=p(()=>o.data),v=p(()=>r.value.items||[]);P(()=>{i.query.items_count&&(n.page=Number(i.query.items_count)/50+1),g()});async function g(e){try{d.value=!0,o.data.items=[],await o.fetchBlocks(e)}catch{throw new Error("")}finally{d.value=!1}}function h(e){if(e==="prev"){m.go(-1),n.page--;return}m.push({path:"/blocks",query:{type:i.query.type,block_number:r.value.nextPageParams.blockNumber,items_count:r.value.nextPageParams.itemsCount}}),n.page++}return q(()=>i.query,e=>{g(e)}),(e,y)=>{const x=L("RouterLink");return T(),D(R,null,[t("section",j,[t("div",z,[l(U)])]),t("section",H,[t("div",I,[J,t("div",K,[t("div",O,[t("div",Q,[l(F,{columns:k.value,items:v.value,pagination:n,loading:b(o).isLoading,onChangePagination:h},{block:a(({item:s})=>[l(x,{to:`/blocks/${s.height}`,class:"bg-linear text-clip"},{default:a(()=>[E(" #"+u(s.height),1)]),_:2},1032,["to"])]),timestamp:a(({item:s})=>[l(G,{date:s.timestamp},null,8,["date"])]),tx_count:a(({item:s})=>[t("span",null,u(s.txCount),1)]),miner:a(({item:s})=>[t("div",W,u(b(f).truncate(s.miner.hash)),1)]),_:1},8,["columns","items","pagination","loading"])])])])])])],64)}}});export{Z as default};

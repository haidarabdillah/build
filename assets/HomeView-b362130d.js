import{d as L,o as m,c as x,a as t,t as n,r as y,u as F,b as W,e as z,f as H,g as v,h as M,i as P,j as e,k as a,l as i,m as R,n as U,w as l,A as E,_ as I,p as T,q as $,s as C,v as J,x as O}from"./index-5ac22b0a.js";function q(k){return Intl.NumberFormat("en-US",{currency:"USD",maximumSignificantDigits:4,notation:"compact"}).format(k)}const G={class:"d-flex align-items-center px-md-3 border-bottom border-dark statictic-wrapper px-0 py-3"},K={class:"d-flex justify-content-center align-items-center statictic-avatar flex-shrink-0"},Q={class:"d-flex flex-column statictic-content"},X={class:"statictic-content-title"},Y={class:"statictic-content-subtitle mt-1 text-white"},p=L({__name:"AppStatistic",props:{initial:{},label:{},value:{},isLoading:{type:Boolean}},setup(k){return(r,b)=>(m(),x("div",G,[t("div",K,n(r.initial),1),t("div",Q,[t("div",X,n(r.label),1),t("div",Y,n(r.isLoading?"...":r.value),1)])]))}}),Z={class:"d-flex flex-column flex-grow-1"},tt={class:"position-relative pb-5",id:"hero"},st={class:"container"},at={class:"row statictic my-4 py-3"},et={class:"col-12 col-lg-6"},ot={class:"row"},nt={class:"col-6 p-3"},lt={class:"d-flex justify-content-between align-items-center"},it=t("div",{class:"custom-border-right d-none d-md-block"},null,-1),ct={class:"col-6 p-3"},rt={class:"d-flex justify-content-between align-items-center"},dt=t("div",{class:"custom-border-right d-none d-md-block"},null,-1),ut={class:"position-relative col-12 col-lg-6 mt-lg-0 mt-4"},_t={class:"position-absolute"},ht={class:"bg-linear text-clip"},vt={id:"transactions"},gt={class:"container"},mt={class:"row"},bt={class:"col-12 col-lg-6"},ft={class:"mb-3"},pt={class:"list"},xt={class:"d-flex flex-column"},kt={class:"text-white"},wt={class:"d-flex flex-column"},yt={class:"text-white"},St={class:"col-12 col-lg-6 mt-lg-0 mt-5"},Tt={class:"d-flex justify-content-between align-items-center"},$t={class:"mb-3"},Ct={key:0,style:{"font-size":"12px"}},Lt={key:1,style:{"font-size":"12px"}},Bt={class:"list"},Vt={class:"d-flex flex-column"},Nt={class:"text-white"},jt={class:"d-flex flex-column"},At={class:"d-flex flex-column"},Ft=L({__name:"HomeView",setup(k){const r=J(),b=O(),B=y([{key:"block",label:"Block",align:"left",slot:!0},{key:"validated",label:"Validated",align:"left",slot:!0},{key:"reward",label:"Block Reward",align:"right",slot:!0}]),V=y([{key:"hash",label:"Txn Hash",align:"left",slot:!0},{key:"from",label:"From",align:"left",slot:!0},{key:"value",label:"Value",align:"right",slot:!0}]),w=y(0),N=F(),j=W(),_=z(),f=H();v(()=>N.data),v(()=>j.data.search);const c=v(()=>_.$state),h=v(()=>f.$state),A=v(()=>{var u;return(u=_.statChartTxs.data.chartData)==null?void 0:u.map(d=>d.date).reverse()}),D=v(()=>{var u;return(u=_.statChartTxs.data.chartData)==null?void 0:u.map(d=>d.txCount).reverse()});return M(async()=>{await _.getStats(),await _.getStatChartTxs(),await _.getStatChartMarket(),await f.fetchTxs(),await f.fetchIndexingStatus(),await f.fetchBlocks();const u="ws://45.77.40.194:8546",d=new WebSocket(`${u}/socket/v2/websocket?vsn=2.0.0`);d.onopen=()=>{function o(s){d.send(JSON.stringify(s))}o(["5","5","transactions:new_transaction","phx_join",{}]),o(["8","8","blocks:new_block","phx_join",{}])},d.onerror=o=>{window.console.error(`WebSocket error ${o}`),window.console.dir(o)},d.onmessage=({data:o})=>{let s={};try{s=JSON.parse(o)}catch(g){console.error(`Error parsing : ${g.data}`)}s[2]==="transactions:new_transaction"&&s[4].transaction&&(w.value+=s[4].transaction)}}),(u,d)=>{const o=P("RouterLink");return m(),x("main",Z,[t("section",tt,[t("div",st,[e(a(E)),t("div",at,[t("div",et,[t("div",ot,[t("div",nt,[t("div",lt,[t("div",null,[e(a(p),{initial:"A",label:"Average block time","is-loading":c.value.stats.isLoading,value:(c.value.stats.data.averageBlockTime/1e3).toFixed(1).toString()+" s"},null,8,["is-loading","value"]),e(a(p),{initial:"T",label:"Total blocks","is-loading":c.value.stats.isLoading,value:(+c.value.stats.data.totalBlocks).toLocaleString()},null,8,["is-loading","value"])]),it])]),t("div",ct,[t("div",rt,[t("div",null,[e(a(p),{initial:"T","is-loading":c.value.stats.isLoading,label:"Transactions",value:(+c.value.stats.data.totalTransactions).toLocaleString()},null,8,["is-loading","value"]),e(a(p),{initial:"W",label:"Wallet addresses","is-loading":c.value.stats.isLoading,value:(+c.value.stats.data.totalAddresses).toLocaleString()},null,8,["is-loading","value"])]),dt])])])]),t("div",ut,[t("span",_t,[i("Daily txs "),t("strong",ht,n(a(q)(+c.value.stats.data.transactionsToday)),1)]),c.value.statChartTxs.isLoading?U("",!0):(m(),R(a(I),{key:0,"is-currency":!0,data:{labels:A.value,datasets:D.value}},null,8,["data"]))])])])]),t("section",vt,[t("div",gt,[t("div",mt,[t("div",bt,[t("h6",ft,"The latest "+n(h.value.blocks.data.length)+" Blocks",1),t("div",pt,[e(a(C),{columns:B.value,loading:h.value.blocks.isLoading,items:h.value.blocks.data},{block:l(({item:s})=>[t("div",xt,[e(o,{to:`/blocks/${s.height}`,class:"bg-linear text-clip"},{default:l(()=>[i(n(s.height),1)]),_:2},1032,["to"]),t("div",kt,[e(a(T),{date:s.timestamp},null,8,["date"])])])]),validated:l(({item:s})=>[t("div",wt,[e(o,{class:"bg-linear text-clip",to:`/accounts/${s.miner.hash}`},{default:l(()=>[i(n(a(r).truncate(s.hash)),1)]),_:2},1032,["to"]),t("div",yt,n(s.txCount)+" transactions ",1)])]),reward:l(({item:s,column:g})=>{var S;return[t("p",{class:$(`text-${g.align}`)},n(a(b).getValue(String(((S=s.rewards[0])==null?void 0:S.reward)||"0"))),3)]}),_:1},8,["columns","loading","items"]),e(o,{to:"/blocks",class:"btn btn-primary btn-lg btn-block"},{default:l(()=>[i(" View all blocks ")]),_:1})])]),t("div",St,[t("div",Tt,[t("h6",$t,"The latest "+n(h.value.transactions.data.length)+" Transactions",1),w.value>0?(m(),x("p",Ct,[e(o,{to:"/transactions",class:"bg-linear text-clip"},{default:l(()=>[i(n(a(b).format(w.value))+" more transactions",1)]),_:1}),i(" Â  have come in ")])):(m(),x("p",Lt,"scanning new transactions..."))]),t("div",Bt,[e(a(C),{columns:V.value,loading:h.value.transactions.isLoading,items:h.value.transactions.data},{hash:l(({item:s})=>[t("div",Vt,[e(o,{to:`/transactions/${s.hash}`,class:"bg-linear text-clip"},{default:l(()=>[i(n(a(r).truncate(s.hash)),1)]),_:2},1032,["to"]),t("div",Nt,[e(a(T),{date:s.timestamp},null,8,["date"])])])]),from:l(({item:s})=>[t("div",jt,[t("div",At,[t("div",null,[i(" From "),e(o,{to:`/accounts/${s.from.hash}`,class:"bg-linear text-clip"},{default:l(()=>[i(n(a(r).truncate(s.from.hash)),1)]),_:2},1032,["to"])]),t("div",null,[i(" To "),e(o,{to:`/accounts/${s.to.hash}`,class:"bg-linear text-clip"},{default:l(()=>[i(n(a(r).truncate(s.to.hash)),1)]),_:2},1032,["to"])])])])]),value:l(({item:s,column:g})=>[t("p",{class:$(`text-${g.align}`)},n(a(b).getValue(s.value)),3)]),_:1},8,["columns","loading","items"]),e(o,{to:"/transactions",class:"btn btn-primary btn-lg btn-block"},{default:l(()=>[i(" View all transactions ")]),_:1})])])])])])])}}});export{Ft as default};

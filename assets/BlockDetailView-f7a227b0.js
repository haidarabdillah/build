import{d as S,y as z,z as j,B as G,C as O,r as I,g as f,h as J,D as K,i as U,c as W,a as t,j as c,t as e,l as d,p as R,w as l,k as h,s as X,F as Y,o as Z,A as Q,G as tt,x as at,v as st}from"./index-ba5cbe7b.js";const et={class:"position-relative pb-5",id:"hero"},ot={class:"container"},lt={id:"block-details"},nt={class:"container"},ct={class:"row"},rt={class:"col-12"},it={class:"nav nav-pills mb-3",id:"pills-tab",role:"tablist"},ut={class:"nav-item",role:"presentation"},dt={class:"nav-item",role:"presentation"},ht={class:"tab-content",id:"pills-tabContent"},pt={class:"tab-pane py-4 fade show active",id:"overview",role:"tabpanel","aria-labelledby":"overview-tab"},_t=t("div",{class:"block-details-title"}," Block Details ",-1),vt={class:"border-bottom border-dark pb-32 mt-32"},bt={class:"d-flex"},ft={class:"font-medium text-base"},gt={class:"mt-3"},kt={class:"mt-4"},xt=t("td",{class:"p-2 pl-0"},"Hash",-1),mt={class:"p-2 pl-0 text-break"},yt=t("td",{class:"p-2 pl-0"},"Parent Hash",-1),wt={class:"p-2 pl-0"},Tt={class:"bg-linear text-clip text-break"},Bt=t("td",{class:"p-2 pl-0"},"Difficulty",-1),$t={class:"p-2 pl-0"},Ct=t("td",{class:"p-2 pl-0"}," Total Difficulty ",-1),Nt={class:"p-2 pl-0"},Pt=t("td",{class:"p-2 pl-0"},"Nonce",-1),Dt={class:"p-2 pl-0"},Vt={class:"tab-pane py-4 fade",id:"transaction",role:"tabpanel","aria-labelledby":"transaction-tab"},Ht=t("img",{src:tt,alt:""},null,-1),Rt=S({__name:"BlockDetailView",setup(At){const i=z(),_=j(),v=G(),g=at(),k=st(),x=O({page:1,limit:50}),q=I([{key:"hash",label:"Txn Hash",align:"left",slot:!0},{key:"time",label:"Time",align:"left",slot:!0},{key:"from",label:"From",align:"left",slot:!0},{key:"arrow",label:"",align:"center",slot:!0},{key:"to",label:"To",align:"left",slot:!0},{key:"value",label:"Value",align:"left",slot:!0},{key:"fee",label:"Txn Fee",align:"left",slot:!0}]),p=f(()=>_.params.hash instanceof Array?_.params.hash[0]:_.params.hash),o=f(()=>i.detail),b=f(()=>i.transactions),E=f(()=>b.value.items||[]);J(()=>{v.push({path:`/blocks/${p.value}?tab=overview`}),m()});async function m(){try{await i.fetchBlock(p.value)}catch{throw new Error("")}}async function L(s){try{i.transactions.items=[],await i.fetchBlockTxs(p.value,s)}catch{throw new Error("")}}function y(s){v.push({path:`/blocks/${p.value}`,query:{tab:s}})}function M(s){if(s==="prev"){v.go(-1),x.page--;return}v.push({path:`/blocks/${p.value}`,query:{tab:"transactions",block_number:b.value.nextPageParams.blockNumber,index:b.value.nextPageParams.index,items_count:b.value.nextPageParams.itemsCount}}),x.page++}function w(s,r="18"){if(!s)return"0";const u=Number(s)/Math.pow(10,Number(r));return g.format(u)}return K(()=>_.query,s=>{s.tab==="overview"&&m(),s.tab==="transactions"&&L(s)}),(s,r)=>{var T,B,$,C,N,P,D,V,H,A,F;const u=U("RouterLink");return Z(),W(Y,null,[t("section",et,[t("div",ot,[c(Q)])]),t("section",lt,[t("div",nt,[t("div",ct,[t("div",rt,[t("ul",it,[t("li",ut,[t("button",{class:"nav-link active",id:"overview-tab","data-toggle":"pill","data-target":"#overview",type:"button",role:"tab","aria-controls":"overview","aria-selected":"true",onClick:r[0]||(r[0]=a=>y("overview"))}," Overview ")]),t("li",dt,[t("button",{class:"nav-link",id:"transaction-tab","data-toggle":"pill","data-target":"#transaction",type:"button",role:"tab","aria-controls":"transaction","aria-selected":"false",onClick:r[1]||(r[1]=a=>y("transactions"))}," Transaction ")])]),t("div",ht,[t("div",pt,[_t,t("div",vt,[t("div",bt,[t("div",ft," Block Height : "+e((T=o.value)==null?void 0:T.height),1)]),t("div",gt,[d(e((B=o.value)==null?void 0:B.txCount)+" Transaction   "+e(($=o.value)==null?void 0:$.size)+" bytes   ",1),c(R,{date:(C=o.value)==null?void 0:C.timestamp},null,8,["date"]),d("   Miner Address "),c(u,{to:`/accounts/${(P=(N=o.value)==null?void 0:N.miner)==null?void 0:P.hash}`,class:"d-inline-flex bg-linear text-clip text-break"},{default:l(()=>{var a,n;return[d(" : "+e((n=(a=o.value)==null?void 0:a.miner)==null?void 0:n.hash),1)]}),_:1},8,["to"])])]),t("div",kt,[t("table",null,[t("tr",null,[xt,t("td",mt,e((D=o.value)==null?void 0:D.hash),1)]),t("tr",null,[yt,t("td",wt,[t("div",Tt,e((V=o.value)==null?void 0:V.parentHash),1)])]),t("tr",null,[Bt,t("td",$t,e(h(g).format(Number((H=o.value)==null?void 0:H.difficulty))),1)]),t("tr",null,[Ct,t("td",Nt,e(h(g).format(Number((A=o.value)==null?void 0:A.totalDifficulty))),1)]),t("tr",null,[Pt,t("td",Dt,e((F=o.value)==null?void 0:F.nonce),1)])])])]),t("div",Vt,[c(X,{columns:q.value,items:E.value,loading:h(i).isLoading,pagination:x,onChangePagination:M},{hash:l(({item:a})=>[c(u,{to:`/transactions/${a==null?void 0:a.hash}`,class:"bg-linear text-clip"},{default:l(()=>[d(e(h(k).truncate(a==null?void 0:a.hash)),1)]),_:2},1032,["to"])]),time:l(({item:a})=>[c(R,{date:a==null?void 0:a.timestamp},null,8,["date"])]),from:l(({item:a})=>[c(u,{to:`/accounts/${a==null?void 0:a.from.hash}`,class:"bg-linear text-clip"},{default:l(()=>{var n;return[d(e(h(k).truncate((n=a==null?void 0:a.from)==null?void 0:n.hash)),1)]}),_:2},1032,["to"])]),arrow:l(()=>[Ht]),to:l(({item:a})=>[c(u,{to:`/accounts/${a==null?void 0:a.to.hash}`,class:"bg-linear text-clip"},{default:l(()=>{var n;return[d(e(h(k).truncate((n=a==null?void 0:a.to)==null?void 0:n.hash)),1)]}),_:2},1032,["to"])]),value:l(({item:a})=>[t("span",null,e(w(a==null?void 0:a.value)),1)]),fee:l(({item:a})=>[t("span",null,e(w(a==null?void 0:a.fee.value)),1)]),_:1},8,["columns","items","loading","pagination"])])])])])])])],64)}}});export{Rt as default};
